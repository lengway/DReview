<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DReview â€” Dashboard</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/fragments.css" />
    <link rel="icon" href="/images/logo.png" type="image/png">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

<body id="dashboard-page">
    <div id="scroll-progress"></div>
    <div id="overlay" class="overlay"></div>
    <div class="layout" id="layout">
        <div class="header"></div>
        <aside class="sidebar"></aside>

        <main id="app" class="main">
            <div class="profile">
                <div class="container">
                    <h1 class="hero-title">Dashboard</h1>
                    <p class="hero-subtitle">Hello, <span id="full_name"></span>!</p>
                </div>

                <div class="container">
                    <div class="profile-card">
                        <div class="profile-top">
                            <div class="profile-info">
                                <div class="avatar-container">
                                <img class="avatar" id="avatar" src="" alt="avatar" />
                                <div class="avatar-actions">
                                    <button class="avatar-btn" id="uploadAvatarBtn">
                                        <i class="fas fa-upload"></i> Upload Photo
                                    </button>
                                    <button class="avatar-btn" id="removeAvatarBtn">
                                        <i class="fas fa-trash"></i> Remove Photo
                                    </button>
                                </div>
                                <input type="file" id="avatarInput" accept="image/*" style="display: none;" />
                            </div>
                                <div class="profile-text">
                                    <h3 id="full_name_display"></h3>
                                    <p id="bio_display" class="hero-subtitle"></p>
                                </div>
                            </div>
                            <div class="reviews-stat">
                                <span class="stat-label">Reviews written</span>
                                <span class="stat-value" id="reviews_count">0</span>
                            </div>
                        </div>
                        <div class="profile-bottom">
                            <div class="favorite-column">
                                <span class="stat-label">Favorite Game</span>
                                <div class="favorite-item" id="favorite_game">
                                    <div class="no-favorite">No favorite game selected</div>
                                    <button class="choose-btn" data-type="game">Choose Game</button>
                                </div>
                            </div>
                            <div class="favorite-column">
                                <span class="stat-label">Favorite Movie</span>
                                <div class="favorite-item" id="favorite_movie">
                                    <div class="no-favorite">No favorite movie selected</div>
                                    <button class="choose-btn" data-type="movie">Choose Movie</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <form id="profile-form">
                        <label>Full name
                            <input id="full_name_input" type="text" />
                        </label>
                        <label>
                            Your email is: <span id="user-email"></span>
                        </label>
                        <label>About me
                            <textarea id="bio" rows="4"></textarea>
                        </label>
                        <button type="submit">Save</button>
                    </form>
                    <button id="logoutBtn">Quit</button>
                </div>

                <!-- Popup for choosing favorite game/movie -->
                <div class="popup-overlay" id="chooseFavoritePopup" hidden>
                    <div class="popup">
                        <button class="popup-close" id="closePopupBtn">&times;</button>
                        <div class="popup-header">
                            <h3 id="popupTitle">Choose Favorite</h3>
                            <div class="search-box">
                                <input type="text" id="searchInput" placeholder="Search..." />
                            </div>
                        </div>
                        <div class="popup-content">
                            <div class="items-grid" id="itemsGrid"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="footer"></footer>

    <script src="/scripts/sidebarToggle.js"></script>
    <script src="/env.js"></script>
    <script type="module" src="/scripts/dashboard.js"></script>
    <script type="module" src="/scripts/main.js"></script>
</body>

</html>